(this["webpackJsonptime-off-tracker-ui"]=this["webpackJsonptime-off-tracker-ui"]||[]).push([[0],{278:function(e,t,a){e.exports=a(418)},318:function(e,t){},417:function(e,t,a){},418:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=a(38),s=a(159),i=a(235),u=a(237),m=a(109);s.a.use(i.a).use(u.a).use(m.e).init({lng:"ru",fallbackLng:"en",keySeparator:!1,load:"languageOnly",react:{useSuspense:!1}});var d=s.a,f=a(5),p=a(22),b=a(459),g=a(462),v=a(493),E=a(256),h=a(494),O=a(422),w=a(242),j=a(10),N=a.n(j),y=a(240),D=a.n(y),S=a(241),C=a.n(S),k=a(492),q=a(463),_=r.a.createContext(),R=r.a.createContext();var I=r.a.memo((function(){var e,t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],l=a[1],o=Object(w.a)("header"),s=o.t,i=o.i18n,u=Object(n.useContext)(_),m=Object(f.a)(u,2),d=m[0],j=m[1],y=Object(p.g)(),S=function(){var e="ru"===i.language?"en":"ru";i.changeLanguage(e),N.a.updateLocale(e,"ru"===e?C.a:D.a)};return Object(n.useEffect)((function(){S()}),[]),r.a.createElement("header",null,r.a.createElement(b.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement("h2",{className:"title",onClick:function(){y.push("/home")}},"Vacation"),r.a.createElement("div",{className:"lng__switch"},r.a.createElement(q.a,{component:"label",container:!0,alignItems:"center",spacing:1},r.a.createElement(q.a,{item:!0},"EN"),r.a.createElement(q.a,{item:!0},r.a.createElement(k.a,{checked:(e=i.language,"ru"===e),onChange:function(){S()}})),r.a.createElement(q.a,{item:!0},"RU"))),d.role&&d.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:function(e){l(e.currentTarget)}},d.role.substr(0,2).toUpperCase()),r.a.createElement(E.a,{elevation:5,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:function(){l(null)}},r.a.createElement(h.a,{onClick:function(){localStorage.clear(),j({userId:null,user:null,role:null,token:null}),l(null),y.push("/login")}},s("Logout")))):r.a.createElement(O.a,{className:"header__login-btn",onClick:function(){return y.push("/login")}},s("Login")))))})),x=a(481),P=a(479),A=a(9),F=a(127),M=a.n(F),T=M.a.create({baseURL:"https://timeofftrackerwebapi2020.azurewebsites.net/"});T.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e.headers["Accept-Language"]=d.language,e}));var L=function(e,t){return"en"===t?N()(e).format("MM/DD/YYYY").toString():N()(e).format("DD.MM.YYYY").toString()},Y=function(e,t){return T.get("users?name=".concat(e,"&role=").concat(t))},U=function(e){return T.delete("users/"+e)},B=function(){return T.get("users?role=Manager")},W=function(){return T.get("user/requests")},H=function(){return T.get("user/reviews")},z=function(e,t,a,n){return T.get("user/reviews?startDate=".concat(e,"&endDate=").concat(t,"&name=").concat(a,"&typeId=").concat(n))},V=function(){return T.get("statistics")},J=a(20),K=a.n(J),G=a(30),$=a(50),Q=a(491),X=a(467),Z=a(466),ee=a(465),te=a(470),ae=a(497),ne=a(489);function re(e){var t=e.isOpen,a=e.onClose,n=e.onOk,c=e.onCancel,l=Object(w.a)("leaves").t;return r.a.createElement("div",null,r.a.createElement(Q.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title"},r.a.createElement(ee.a,{id:"alert-dialog-title"},l("DatesIntersection")),r.a.createElement(Z.a,null,r.a.createElement("span",{className:"alert-dialog-description"},l("DatesIntersectionConfirmation"))),r.a.createElement(X.a,null,r.a.createElement(O.a,{onClick:n,color:"primary"},l("OK")),r.a.createElement(O.a,{onClick:c,color:"primary",autoFocus:!0},l("Cancel")))))}var ce=a(157),le=a.n(ce),oe=a(495),se=a(487);var ie=r.a.memo((function(e){var t=e.options,a=e.managers,n=e.onChange,c=e.idx,l=e.isDisabled,o=e.isEditable,s=e.isApproved,i=Object(w.a)("leaves").t;return r.a.createElement("div",{className:"approvers__item"},r.a.createElement("li",null,r.a.createElement(se.a,{className:"approvers__item-form",disabled:s||l,options:t.filter((function(e){return!a.includes(e)})),getOptionSelected:function(e,t){return e.value===t.value},value:a[c]?0===a[c].length?null:a[c]:null,onChange:function(e,t){a[c]=null!==t?t:"",n(Object($.a)(a))},renderInput:function(e){return r.a.createElement(oe.a,e)}})),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"approvers__add-btn",disabled:!0===s||(s||l),onClick:function(){if(!(t.length<1||a.length===t.length)){var e=Object($.a)(a);e.splice(c+1,0,""),n(e)}}},i("AddManager")),r.a.createElement("button",{className:"approvers__delete-btn",disabled:!0===s||(s||l),onClick:function(){if(1!==a.length){var e=Object($.a)(a);e.splice(c,1),n(e)}}},i("DeleteManager"))))})),ue=[{id:0,title:"Any"},{id:1,title:"AdministrativeForceMajeureLeave"},{id:2,title:"AdministrativeLeave"},{id:3,title:"SocialLeave"},{id:4,title:"SickLeaveNoDocuments"},{id:5,title:"SickLeaveWithDocuments"},{id:6,title:"StudyLeave"},{id:7,title:"PaidLeave"}],me=["Any","New","InProgress","Approved","Rejected"];var de=function(e){var t=e.managers,a=e.isSendingRequest,n=e.prManagers,c=e.changeManagers,l=e.request,o=e.isEditable,s=Object(w.a)(["leaves","roles"]).t,i=function(e){var t=l.reviews.find((function(t){return t.reviewer.firstName.concat(" ",t.reviewer.lastName)===e}));return void 0!==t?t.isApproved:null},u=r.a.useCallback((function(e){return r.a.createElement(r.a.Fragment,null,e.map((function(t,s){return r.a.createElement("div",{key:"div-icon-".concat(s),style:{display:"flex",flexDirection:"row"}},r.a.createElement(le.a,{key:"done-icon-".concat(s),className:"done-icon".concat(l&&null!==i(t)?i(t)?" accepted":" rejected":"")}),r.a.createElement(ie,{key:"sign-idx-".concat(s),idx:s,options:n,managers:e,onChange:c,isDisabled:a,isApproved:l&&l.stateId===me.indexOf("InProgress")&&i(t),isEditable:o}))})))}),[a,o]);return r.a.createElement("div",null,r.a.createElement("h3",null,s("Approvers")),r.a.createElement("ol",{className:"approvers__list"},r.a.createElement("div",{className:"approvers__content"},r.a.createElement(le.a,{className:"done-icon"+(l&&!0===l.reviews[0].isApproved?" accepted":"")+(l&&!1===l.reviews[0].isApproved?" rejected":"")}),r.a.createElement("li",null,s("roles:Accounting"))),t&&u(t)))};var fe=function(e){var t=e.disabled,a=e.comment,n=e.changeComment,c=Object(w.a)("leaves").t;return r.a.createElement(oe.a,{disabled:t,label:c("Comment"),variant:"standard",fullWidth:!0,multiline:!0,className:"form-comment",value:a,onChange:function(e){return n(e)}})},pe=(a(176),a(192),a(93));var be=r.a.memo((function(e){var t=e.fromDate,a=e.changeFromDate,c=e.toDate,l=e.changeToDate,o=e.isSendingRequest,s=e.disablePeriod,i=e.showAllDays,u=Object(n.useState)(!1),m=Object(f.a)(u,2),d=m[0],p=m[1],b=Object(n.useState)(!1),g=Object(f.a)(b,2),v=g[0],E=g[1],h=Object(w.a)("leaves").t,O=Math.floor((c-t)/864e5),j=function(){return!1};return r.a.createElement("div",{className:"period__content"},r.a.createElement(pe.SingleDatePicker,{id:"dateFrom",disabled:o,showClearDate:!0,readOnly:!0,placeholder:h("From"),isOutsideRange:i&&j,isDayBlocked:function(e){return c?e>c:null},numberOfMonths:1,date:t,onDateChange:function(e){return a(e)},focused:d,onFocusChange:function(e){var t=e.focused;return p(t)}}),r.a.createElement(pe.SingleDatePicker,{id:"dateTo",disabled:o,showClearDate:!0,readOnly:!0,placeholder:h("To"),isOutsideRange:i&&j,isDayBlocked:function(e){return t?e<t:null},numberOfMonths:1,date:c,onDateChange:function(e){return l(e)},focused:v,onFocusChange:function(e){var t=e.focused;return E(t)}}),!s&&t&&c&&O>=0?r.a.createElement("h4",null,h("VacationDays",{days:O+1})):null)}));var ge=function(e){var t=e.prManagers,a=e.isSendingRequest,n=e.comment,c=e.changeComment,l=e.fromDate,o=e.changeFromDate,s=e.toDate,i=e.changeToDate,u=e.managers,m=e.changeManagers,d=e.isEditable,f=e.request;return r.a.createElement("div",null,r.a.createElement(be,{fromDate:l,changeFromDate:o,toDate:s,changeToDate:i,isSendingRequest:f&&(f.stateId===me.indexOf("InProgress")||d)||a}),r.a.createElement(fe,{disabled:f&&(f.stateId===me.indexOf("InProgress")||d)||a,comment:n,changeComment:c}),r.a.createElement(de,{managers:u,isSendingRequest:d||a,prManagers:t,changeManagers:m,request:f,isEditable:d}))};var ve=function(e){var t=e.isSendingRequest,a=e.comment,n=e.changeComment,c=e.fromDate,l=e.changeFromDate,o=e.toDate,s=e.changeToDate,i=e.request,u=e.isEditable;return r.a.createElement("div",null,r.a.createElement(be,{fromDate:c,changeFromDate:l,toDate:o,changeToDate:s,isSendingRequest:i&&(i.stateId===me.indexOf("InProgress")||u)||t}),r.a.createElement(fe,{disabled:i&&(i.stateId===me.indexOf("InProgress")||u)||t,comment:a,changeComment:n}),r.a.createElement(de,null))};var Ee=function(e){var t=e.prManagers,a=e.isSendingRequest,n=e.comment,c=e.changeComment,l=e.fromDate,o=e.changeFromDate,s=e.toDate,i=e.changeToDate,u=e.managers,m=e.changeManagers,d=e.request,f=e.isEditable;return r.a.createElement("div",null,r.a.createElement(be,{fromDate:l,changeFromDate:o,toDate:s,changeToDate:i,isSendingRequest:d&&(d.stateId===me.indexOf("InProgress")||f)||a}),r.a.createElement(fe,{disabled:d&&(d.stateId===me.indexOf("InProgress")||f)||a,comment:n,changeComment:c}),r.a.createElement(de,{managers:u,isSendingRequest:f||a,prManagers:t,changeManagers:m,request:d,isEditable:f}))},he=[{id:1,text:"Half day",tag:"HalfDay"},{id:2,text:"Full day",tag:"FullDay"}];var Oe=function(e){var t=e.isSendingRequest,a=e.comment,c=e.changeComment,l=e.fromDate,o=e.changeFromDate,s=(e.toDate,e.changeToDate),i=e.duration,u=e.changeDuration,m=e.request,d=e.isEditable,p=Object(n.useState)(!1),b=Object(f.a)(p,2),g=b[0],v=b[1],E=Object(n.useState)(!1),O=Object(f.a)(E,2),j=O[0],N=O[1],y=Object(w.a)("leaves").t;return r.a.createElement("div",null,r.a.createElement("div",{className:"nodoc__content"},r.a.createElement(pe.SingleDatePicker,{id:"dateFrom",disabled:m&&(m.stateId===me.indexOf("InProgress")||d)||t,showClearDate:!0,readOnly:!0,placeholder:y("From"),numberOfMonths:1,date:l,onDateChange:function(e){o(e),s(e)},focused:g,onFocusChange:function(e){var t=e.focused;return v(t)}}),r.a.createElement(pe.SingleDatePicker,{id:"dateTo",disabled:m&&(m.stateId===me.indexOf("InProgress")||d)||t,showClearDate:!0,readOnly:!0,placeholder:y("To"),numberOfMonths:1,date:l,onDateChange:function(e){o(e),s(e)},focused:j,onFocusChange:function(e){var t=e.focused;return N(t)}}),r.a.createElement(te.a,{className:"sick-no-doc__use"},r.a.createElement(ae.a,null,y("Use")),r.a.createElement(ne.a,{disabled:m&&(m.stateId===me.indexOf("InProgress")||d)||t,value:i,onChange:function(e){return u(e.target.value)}},he.map((function(e,t){return r.a.createElement(h.a,{key:"use-".concat(e.text,"-idx-").concat(t),value:e.id},y(e.tag))}))))),r.a.createElement(fe,{disabled:m&&(m.stateId===me.indexOf("InProgress")||d)||t,comment:a,changeComment:c}),r.a.createElement(de,null))};var we=function(e){var t=e.isSendingRequest,a=e.comment,n=e.changeComment,c=e.fromDate,l=e.changeFromDate,o=e.toDate,s=e.changeToDate,i=e.request,u=e.isEditable;return r.a.createElement("div",null,r.a.createElement(be,{fromDate:c,changeFromDate:l,toDate:o,changeToDate:s,isSendingRequest:i&&(i.stateId===me.indexOf("InProgress")||u)||t}),r.a.createElement(fe,{disabled:i&&(i.stateId===me.indexOf("InProgress")||u)||t,comment:a,changeComment:n}),r.a.createElement(de,null))};var je=function(e){var t=e.isSendingRequest,a=e.comment,n=e.changeComment,c=e.fromDate,l=e.changeFromDate,o=e.toDate,s=e.changeToDate,i=e.request,u=e.isEditable;return r.a.createElement("div",null,r.a.createElement(be,{fromDate:c,changeFromDate:l,toDate:o,changeToDate:s,isSendingRequest:i&&(i.stateId===me.indexOf("InProgress")||u)||t}),r.a.createElement(fe,{disabled:i&&(i.stateId===me.indexOf("InProgress")||u)||t,comment:a,changeComment:n}),r.a.createElement(de,null))};var Ne=function(e){var t=e.prManagers,a=e.isSendingRequest,n=e.comment,c=e.changeComment,l=e.fromDate,o=e.changeFromDate,s=e.toDate,i=e.changeToDate,u=e.managers,m=e.changeManagers,d=e.isEditable,f=e.request;return r.a.createElement("div",null,r.a.createElement(be,{fromDate:l,changeFromDate:o,toDate:s,changeToDate:i,isSendingRequest:f&&(f.stateId===me.indexOf("InProgress")||d)||a}),r.a.createElement(fe,{disabled:f&&(f.stateId===me.indexOf("InProgress")||d)||a,comment:n,changeComment:c}),r.a.createElement(de,{managers:u,isSendingRequest:d||a,prManagers:t,changeManagers:m,request:f,isEditable:d}))},ye=(a(415),{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),De=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);case"Successful Login":return A.b.success(d.t("notifications:LoginSuccess"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},Se=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);case"test":return A.b.error(d.t("notifications:NoConnection"),ye);case"Successful New User Adding":return A.b.success(d.t("notifications:NewUserAdded"),ye);case"New user failure":return A.b.error(d.t("notifications:NewUserFail"),ye);case"Role changed success":return A.b.success(d.t("notifications:ChangeRole"),ye);case"Role changed failed":return A.b.error(d.t("notifications:ChangeRoleFail"),ye);case"User delete success":return A.b.success(d.t("notifications:DeleteUser"),ye);case"User delete failed":return A.b.error(d.t("notifications:DeleteUserFail"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},Ce=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},ke=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"NoApprovedCorrectytion":return A.b.warn(d.t("notifications:NoApprovedCorrectytion"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);case"Edited":return A.b.success(d.t("notifications:Edited"),ye);case"NotEdited":return A.b.error(d.t("notifications:NotEdited"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},qe=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);case"Empty managers":return A.b.error(d.t("notifications:EmptyManagers"),ye);case"Empty dates":return A.b.error(d.t("notifications:EmptyDates"),ye);case"Empty comment":return A.b.error(d.t("notifications:NoComment"),ye);case"New request success":return A.b.success(d.t("notifications:NewRequest"),ye);case"New request failed":return A.b.error(d.t("notifications:NewRequestFail"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},_e=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},Re=function(e){switch(e){case"Network Error":return A.b.error(d.t("notifications:NoConnection"),ye);case"400":return A.b.error(d.t("notifications:BadRequest"),ye);case"Approve success":return A.b.success(d.t("notifications:ApproveRequest"),ye);case"Approve failed":return A.b.error(d.t("notifications:ApproveFail"),ye);case"Rejection success":return A.b.success(d.t("notifications:RejectRequest"),ye);case"Rejection failed":return A.b.error(d.t("notifications:RejectFail"),ye);case"No comment":return A.b.error(d.t("notifications:NoComment"),ye);default:return A.b.warn(d.t("notifications:SomethingWrong"),ye)}},Ie=[];var xe=r.a.memo((function(e){var t=e.isOpen,a=e.onClose,c=e.calendar,l=e.request,o=Object(n.useContext)(_),s=Object(f.a)(o,2),i=s[0],u=(s[1],Object(n.useState)(6)),m=Object(f.a)(u,2),d=m[0],p=m[1],b=Object(n.useState)(!1),g=Object(f.a)(b,2),v=g[0],E=g[1],j=Object(n.useState)(""),y=Object(f.a)(j,2),D=y[0],S=y[1],C=Object(n.useState)(null),k=Object(f.a)(C,2),q=k[0],R=k[1],I=Object(n.useState)(null),x=Object(f.a)(I,2),P=x[0],A=x[1],F=Object(n.useState)([""]),M=Object(f.a)(F,2),L=M[0],Y=M[1],U=Object(n.useState)(2),W=Object(f.a)(U,2),H=W[0],z=W[1],V=Object(n.useState)(null),J=Object(f.a)(V,2),ce=J[0],le=J[1],oe=Object(n.useState)(!1),se=Object(f.a)(oe,2),ie=se[0],ue=se[1],me=Object(w.a)(["translation","requests","notifications"]).t,de=function(e){if(E(!0),!q||!P)return qe("Empty dates"),void E(!1);if([2,4,5,7].includes(d)&&0===D.replaceAll(" ","").length)return qe("Empty comment"),void E(!1);if([2,6,7].includes(d)&&L.includes(""))return qe("Empty managers"),void E(!1);var t=L.length>0&&""!==L[0]?L.map((function(e){return ce.find((function(t){return t.firstName.concat(" ",t.lastName)===e})).id})):null;(function(e){var t=e.leaveType,a=e.fromDate,n=e.toDate,r=e.pmanager,c=e.comment,l=e.duration,o=e.userId,s=e.isDateIntersectionAllowed;return T.post("requests",{typeId:t,startDate:a,endDate:n,reviewsIds:r,comment:c,durationId:l,userId:o,isDateIntersectionAllowed:s})})({leaveType:d,fromDate:N()(q._d).format("YYYY-MM-DD").toString(),toDate:N()(P._d).format("YYYY-MM-DD").toString(),pmanager:null!==t?[1].concat(Object($.a)(t)):[1],comment:D,duration:H,userId:i.userId,isDateIntersectionAllowed:e}).then((function(e){e.data;E(!1),qe("New request success")})).catch((function(e){"Network Error"===e.message?qe("Network Error"):e.response&&400===e.response.status?qe("400"):e.response&&409===e.response.status?"Dates intersection"===e.response.data?ue(!0):qe(""):qe("New request failed"),E(!1)})),ue(!1)},fe=function(){ue(!1)};Object(n.useEffect)((function(){function e(){return(e=Object(G.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().then((function(e){var t=e.data;le(t),Ie=t.map((function(e){return e.firstName.concat(" ",e.lastName)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){if(l){var e=l.reviews.filter((function(e){return 1!==e.reviewerId})).map((function(e){return e.reviewer.firstName.concat(" ",e.reviewer.lastName)}));Y(e),R(N()(l.startDate)),A(N()(l.endDate)),z(l.durationId),S(l.comment),p(l.typeId)}}),[]),Object(n.useEffect)((function(){c&&(R(c[0]),A(c[1]))}),[c]);var pe={prManagers:Ie,isSendingRequest:v,comment:D,changeComment:function(e){S(e.target.value)},fromDate:q,changeFromDate:function(e){R(e)},toDate:P,changeToDate:function(e){A(e)},managers:L,changeManagers:function(e){Y(e)},duration:H,changeDuration:function(e){z(e)}},be=[{id:1,title:"AdministrativeForceMajeureLeave",comp:r.a.createElement(ve,pe)},{id:2,title:"AdministrativeLeave",comp:r.a.createElement(ge,pe)},{id:3,title:"SocialLeave",comp:r.a.createElement(je,pe)},{id:4,title:"SickLeaveNoDocuments",comp:r.a.createElement(Oe,pe)},{id:5,title:"SickLeaveWithDocuments",comp:r.a.createElement(we,pe)},{id:6,title:"StudyLeave",comp:r.a.createElement(Ne,pe)},{id:7,title:"PaidLeave",comp:r.a.createElement(Ee,pe)}];return r.a.createElement("div",null,r.a.createElement(Q.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:t,onClose:a,"aria-labelledby":"new-request-title","aria-describedby":"new-request-description"},r.a.createElement(ee.a,{id:"new-request-title"},me("requests:NewRequest")),r.a.createElement(Z.a,{className:"leave"},r.a.createElement(te.a,{disabled:v,className:"leave__type"},r.a.createElement(ae.a,null,me("requests:LeaveType")),r.a.createElement(ne.a,{value:d,onChange:function(e){p(e.target.value),Y([""])}},be.map((function(e,t){return r.a.createElement(h.a,{key:"".concat(e.title,"-").concat(t),value:e.id},me(e.title))})))),be[d-1].comp),r.a.createElement(X.a,null,r.a.createElement(O.a,{className:"new-request__ok-btn",variant:"contained",disabled:v,onClick:function(){return de(!1)}},me("requests:SendRequest")),r.a.createElement(O.a,{className:"new-request__cancel-btn",variant:"contained",disabled:v,onClick:a,autoFocus:!0},me("requests:Cancel")))),r.a.createElement(re,{isOpen:ie,onClose:fe,onOk:function(){return de(!0)},onCancel:function(){E(!1),fe()}}))})),Pe=a(474),Ae=a(471),Fe=a(472),Me=a(473),Te=a(475),Le=a(476),Ye=a(477),Ue=a(498),Be=[{id:"From",label:"From"},{id:"Role",label:"Role"},{id:"Type",label:"Type"},{id:"Dates",label:"Dates"},{id:"Comments",label:"RequestComments"},{id:"Details",label:"StateDetails"}],We=[{id:"From",label:"From"},{id:"Type",label:"Type"},{id:"Dates",label:"Dates"},{id:"Comments",label:"RequestComments"}];function He(e){var t=e.headCells,a=e.t;return r.a.createElement(Ae.a,null,r.a.createElement(Fe.a,null,t.map((function(e){return r.a.createElement(Me.a,{key:"table-cell-".concat(e.id),className:"reviews__table-cell",align:"center",padding:"default"},a(e.label))})),r.a.createElement(Me.a,{className:"reviews__table-cell",align:"center",padding:"default"},a("Actions"))))}var ze=Object(Pe.a)((function(e){return{root:{width:"100%",marginTop:"10px"},table:{width:"100%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ve(e){var t=e.data,a=e.short,c=e.users,l=ze(),o=Object(p.g)(),s=Object(n.useState)(0),i=Object(f.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(5),b=Object(f.a)(d,2),g=b[0],v=b[1],E=Object(w.a)(["reviews","translation","roles","notifications"]),h=E.t,j=E.i18n,N=t&&g-Math.min(g,t.length-u*g);return Object(n.useEffect)((function(){a&&v(3)}),[]),r.a.createElement("div",{className:l.root},t?r.a.createElement(Te.a,null,r.a.createElement(Le.a,{className:l.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(He,{headCells:a?We:Be,t:h}),r.a.createElement(Ye.a,null,t.map((function(e){return e.request.reviews.map((function(e){return e.reviewer=c.find((function(t){return t.id===e.reviewerId}))})),e.request.user=c.find((function(t){return t.id===e.request.userId})),e})).slice(u*g,u*g+g).map((function(e,t){var n="enhanced-table-".concat(t);return r.a.createElement(Fe.a,{className:"reviews__users-table-row",hover:!0,tabIndex:-1,key:e.id},r.a.createElement(Me.a,{component:"th",align:"center",id:n,scope:"row",padding:"none"},e.request.user.firstName.concat(" ",e.request.user.lastName)),a?null:r.a.createElement(Me.a,{align:"center"},h("roles:".concat(e.request.user.role))),r.a.createElement(Me.a,{align:"center"},h("translation:"+ue[e.request.typeId].title)),r.a.createElement(Me.a,{align:"center"},L(e.request.startDate,j.language)," -"," ",L(e.request.endDate,j.language)),r.a.createElement(Me.a,{align:"center"},e.request.comment),a?null:r.a.createElement(Me.a,{align:"center"},function(e){var t=e.request.reviews.reduce((function(e,t){return t.isApproved?"".concat(e," ").concat(t.reviewer.firstName.concat(" ",t.reviewer.lastName),","):e}),"");return t?"".concat(h("AlreadyApproved"),": ").concat(t.slice(0,-1)):""}(e)),r.a.createElement(Me.a,{align:"center"},r.a.createElement(O.a,{className:"reviews-table__ok-btn",variant:"contained",style:{marginRight:10},onClick:function(){o.push("/other_requests/actions?review=".concat(e.id,"&action=approve"))}},h("Accept")),r.a.createElement(O.a,{className:"reviews-table__cancel-btn",variant:"contained",onClick:function(){o.push("/other_requests/actions?review=".concat(e.id,"&action=reject"))}},h("Reject"))))})),N>0&&r.a.createElement(Fe.a,{style:{height:33*N}},r.a.createElement(Me.a,{colSpan:6})))),r.a.createElement(Ue.a,{rowsPerPageOptions:a?[3]:function(){if(t){for(var e=[],n=a?3:5,r=Math.floor(t.length/n),c=1;c<r+1;c++)e.push(n*c);return t.length!==e[e.length-1]&&e.push(t.length),e}}(),component:"div",count:t.length,rowsPerPage:g,page:u,labelRowsPerPage:h("LabelRowsPerPage"),labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return h("LabelDisplayedRows",{from:t,to:a,count:n})},onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){v(e.target.value),m(0)}})):r.a.createElement("p",null,h("NoData")))}var Je=[{id:"State",label:"State"},{id:"Type",label:"Type"},{id:"Dates",label:"Dates"},{id:"MyComment",label:"MyComment"},{id:"Details",label:"StateDetails"},{id:"View",label:"View"}],Ke=[{id:"State",label:"State"},{id:"Type",label:"Type"},{id:"Dates",label:"Dates"},{id:"Details",label:"StateDetails"}];function Ge(e){var t=e.headCells,a=e.t;return r.a.createElement(Ae.a,null,r.a.createElement(Fe.a,null,t.map((function(e){return r.a.createElement(Me.a,{key:"table-cell-".concat(e.id),className:"reviews__table-cell",align:"center",padding:"default"},a("requests:"+e.label))}))))}var $e=Object(Pe.a)((function(e){return{root:{width:"100%",marginTop:"10px"},table:{width:"100%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Qe(e){var t=e.data,a=e.short,c=e.users,l=$e(),o=Object(p.g)(),s=Object(n.useState)(0),i=Object(f.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(5),b=Object(f.a)(d,2),g=b[0],v=b[1],E=Object(w.a)(["translation","requests","notifications"]),h=E.t,j=E.i18n;return r.a.createElement("div",{className:l.root},t?r.a.createElement(Te.a,null,r.a.createElement(Le.a,{className:l.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Ge,{headCells:a?Ke:Je,t:h}),r.a.createElement(Ye.a,null,t.map((function(e){return e.reviews.map((function(e){return e.reviewer=c.find((function(t){return t.id===e.reviewerId}))})),e.user=c.find((function(t){return t.id===e.userId})),e})).slice(u*g,u*g+g).map((function(e,t){var n="enhanced-table-".concat(t);return r.a.createElement(Fe.a,{className:"reviews__users-table-row",hover:!0,tabIndex:-1,key:e.id},r.a.createElement(Me.a,{component:"th",align:"center",id:n,scope:"row",padding:"none"},h(me[e.stateId])),r.a.createElement(Me.a,{align:"center"},h(ue[e.typeId].title)),r.a.createElement(Me.a,{align:"center"},L(e.startDate,j.language)," -"," ",L(e.endDate,j.language)),a?null:r.a.createElement(Me.a,{align:"center"},e.comment),r.a.createElement(Me.a,{align:"center"},4===e.stateId?"".concat(h("requests:RejectionReason"),": ").concat(e.reviews.find((function(e){return!1===e.isApproved}))?e.reviews.find((function(e){return!1===e.isApproved})).comment:h("requests:RejectedByOwner")):function(e){var t=e.reviews.reduce((function(e,t){return t.isApproved?"".concat(e," ").concat(t.reviewer.firstName.concat(" ",t.reviewer.lastName),","):e}),"");return t?"".concat(h("requests:AlreadyApproved"),": ").concat(t.slice(0,-1)):""}(e)),a?null:r.a.createElement(Me.a,{align:"center"},r.a.createElement(O.a,{className:"reviews-table__ok-btn",variant:"contained",style:{marginRight:10},onClick:function(){o.push("/my_requests/"+e.id)}},h("requests:View"))))})))),a?null:r.a.createElement(Ue.a,{rowsPerPageOptions:function(){if(t){for(var e=[],a=Math.floor(t.length/5),n=1;n<a+1;n++)e.push(5*n);return t.length!==e[e.length-1]&&e.push(t.length),e}}(),component:"div",count:t.length,rowsPerPage:g,page:u,labelRowsPerPage:h("requests:LabelRowsPerPage"),labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return h("requests:LabelDisplayedRows",{from:t,to:a,count:n})},onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){v(e.target.value),m(0)}})):r.a.createElement("p",null,h("requests:NoData")))}var Xe=a(247),Ze=a(248),et=a(255),tt=a(258),at=a(158),nt=a(478),rt=Object(at.b)(N.a),ct=function(e){Object(tt.a)(a,e);var t=Object(et.a)(a);function a(){var e;Object(Xe.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t){var a=t.start,n=t.end,r=window.prompt("New Event name");r&&e.setState({events:[].concat(Object($.a)(e.state.events),[{start:a,end:n,title:r}])})},e.eventStyleGetter=function(e,t,a,n){var r=JSON.parse(localStorage.getItem("user")),c=r.firstName.concat(" ",r.lastName);if(e.title===c){return{style:{backgroundColor:"green"}}}},e.state={events:[]},e}return Object(Ze.a)(a,[{key:"componentDidMount",value:function(){this.setState({events:this.props.events})}},{key:"render",value:function(){var e=this.props,t=e.func,a=e.t;return r.a.createElement("div",{className:"example"},r.a.createElement(at.a,{selectable:!0,localizer:rt,events:this.state.events,views:["month"],defaultDate:new Date,onSelectEvent:function(e){},onSelectSlot:function(e){var a=e.start,n=e.end;return t(a,n)},eventPropGetter:this.eventStyleGetter,messages:{today:a("Today"),previous:a("Back"),next:a("Next")}}))}}]),a}(r.a.Component),lt=Object(nt.a)("home")(ct);var ot=r.a.memo((function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(f.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(null),m=Object(f.a)(u,2),d=m[0],b=m[1],g=Object(n.useState)(null),v=Object(f.a)(g,2),E=v[0],h=v[1],j=Object(n.useState)(null),y=Object(f.a)(j,2),D=y[0],S=y[1],C=Object(w.a)(["home","notifications"]).t,k=Object(p.g)(),q=Object(n.useContext)(_),I=Object(f.a)(q,2),x=I[0],F=I[1],M=Object(n.useContext)(R),L=Object(f.a)(M,2),Y=L[0],U=(L[1],function(e,t){return e.id>t.id?-1:e.id<t.id?1:0});return Object(n.useEffect)((function(){var e;if(x.userId&&(e=x.userId,T.get("users/"+e)).then((function(e){var t=e.data;localStorage.setItem("user",JSON.stringify(t))})).catch((function(e){"Network Error"===e.message?Ce("Network Error"):e.response&&400===e.response.status?Ce("400"):Ce()})),W().then((function(e){var t=e.data.sort(U);i(t)})).catch((function(e){"Network Error"===e.message?Ce("Network Error"):e.response&&400===e.response.status?Ce("400"):e.response&&401===e.response.status?(localStorage.clear(),F({userId:null,user:null,role:null,token:null})):Ce()})),"Employee"!==x.role){H().then((function(e){var t=e.data.filter((function(e){return null===e.isApproved}));b(t)})).catch((function(e){"Network Error"===e.message?Ce("Network Error"):e.response&&400===e.response.status?Ce("400"):Ce()}))}}),[x.userId]),Object(n.useEffect)((function(){var e;if(Y&&s){if(e=s.filter((function(e){return e.stateId===me.indexOf("Approved")})).map((function(e){var t=Y.find((function(t){return t.id===e.userId})),a=new Date(e.startDate),n=new Date(e.endDate);return e.startDate!==e.endDate&&n.setHours(24),{title:t.firstName.concat(" ",t.lastName),start:a,end:n}})),d){var t=d.map((function(e){var t=Y.find((function(t){return t.id===e.request.userId})),a=new Date(e.request.startDate),n=new Date(e.request.endDate);return e.request.startDate!==e.request.endDate&&n.setHours(24),{title:t.firstName.concat(" ",t.lastName),start:a,end:n}}));e=e.concat(t)}S(e)}}),[Y,s,d]),r.a.createElement("div",null,r.a.createElement("div",{className:"home__content"},"Accountant"!==x.role?r.a.createElement("div",{className:"home__requests"},r.a.createElement("div",{className:"requests__content"},r.a.createElement("h2",{className:"requests__title"},C("MyRecentRequests")),r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return k.push("/my_requests")},className:"requests__viewall-btn"},C("ViewAll")),r.a.createElement(O.a,{className:"requests__newreq-btn",variant:"contained",style:{height:"30px",width:"140px",minWidth:"140px"},onClick:function(){c(!0)}},C("NewRequest"))),Y&&s?Y&&s&&s.length>0?r.a.createElement(Qe,{data:s.slice(0,3),users:Y,short:!0}):r.a.createElement("h3",null,C("NoRequests")):r.a.createElement(P.a,null)):null,"Employee"!==x.role?r.a.createElement("div",{className:"home__reviews"},r.a.createElement("h2",{className:"reviews__title"},C("NewRequestsForApproval")," (",d&&d.length,")"),Y&&d?Y&&d&&d.length>0?r.a.createElement(Ve,{data:d,users:Y,short:!0}):r.a.createElement("h3",null,C("NoReviews")):r.a.createElement(P.a,null)):null,r.a.createElement(xe,{isOpen:a,onClose:function(){c(!1)},calendar:E})),D&&r.a.createElement(lt,{func:function(e,t){if(!("Accountant"===x.role||new Date(e)<new Date)){var a=N()(new Date(e)),n=N()(new Date(t));h([a,n]),c(!0)}},events:D}),r.a.createElement(A.a,null))}));var st=r.a.memo((function(e){var t=e.isSendingRequest,a=e.handleFilter,c=Object(n.useState)(0),l=Object(f.a)(c,2),o=l[0],s=l[1],i=Object(n.useState)(0),u=Object(f.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(null),b=Object(f.a)(p,2),g=b[0],v=b[1],E=Object(n.useState)(null),j=Object(f.a)(E,2),y=j[0],D=j[1],S=Object(w.a)(["translation","requests"]).t;return r.a.createElement("div",{className:"myrequest__content"},r.a.createElement(be,{fromDate:g,changeFromDate:function(e){v(e)},toDate:y,changeToDate:function(e){D(e)},showAllDays:!0,isSendingRequest:t,disablePeriod:!0}),r.a.createElement(te.a,{className:"myrequest__state"},r.a.createElement(ae.a,null,S("requests:State")),r.a.createElement(ne.a,{value:o,onChange:function(e){return function(e){s(e.target.value)}(e)}},me.map((function(e,t){return r.a.createElement(h.a,{key:"type-".concat(e,"-idx-").concat(t),value:t},S(e))})))),r.a.createElement(te.a,{className:"myrequest__type"},r.a.createElement(ae.a,null,S("requests:Type")),r.a.createElement(ne.a,{value:m,onChange:function(e){return function(e){d(e.target.value)}(e)}},ue.map((function(e,t){return r.a.createElement(h.a,{key:"type-".concat(e.title,"-idx-").concat(t),value:e.id},S(e.title))})))),r.a.createElement(O.a,{variant:"contained",color:"secondary",onClick:function(){var e=0===o?"":o,t=0===m?"":m,n=null!==g?N()(g._d).format("YYYY-MM-DD").toString():"",r=null!==y?N()(y._d).format("YYYY-MM-DD").toString():"";a(n,r,e,t)},className:"myrequest__filter-btn"},S("requests:Filter")))}));var it=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(f.a)(l,2),s=o[0],i=o[1],u=Object(w.a)(["requests","translation","notifications"]).t,m=Object(n.useContext)(R),d=Object(f.a)(m,2),p=d[0],b=(d[1],Object(n.useState)(null)),g=Object(f.a)(b,2),v=g[0],E=g[1],h=Object(n.useContext)(_),j=Object(f.a)(h,2),N=(j[0],j[1]);return Object(n.useEffect)((function(){function e(){return(e=Object(G.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W().then((function(e){var t=e.data;c(t)})).catch((function(e){"Network Error"===e.message?ke("Network Error"):e.response&&400===e.response.status?ke("400"):e.response&&401===e.response.status?(localStorage.clear(),N({userId:null,user:null,role:null,token:null})):ke("")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(G.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V().then((function(e){var t=e.data;E(t)})).catch((function(e){"Network Error"===e.message?ke("Network Error"):e.response&&400===e.response.status?ke("400"):e.response&&401===e.response.status?(localStorage.clear(),N({userId:null,user:null,role:null,token:null})):ke("")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,u("Statistics",{year:(new Date).getFullYear()})),r.a.createElement("div",{className:"statistics"},v&&function(e,t){for(var a=[],n=1;n<e.length;n+=t)a.push(e.slice(n,n+t));return a}(ue,3).map((function(e,t){return r.a.createElement("div",{key:"idx-".concat(t),className:"statistics__text"},e.map((function(e){var t=v.find((function(t){return t.typeId===e.id}));return r.a.createElement("p",{key:"title-".concat(e.title)},u("translation:".concat(e.title)),":"," ",u("UsedDays",{days:t?t.days:0}))})))})),r.a.createElement(O.a,{variant:"contained",color:"secondary",style:{height:"40px"},onClick:function(){i(!0)}},u("NewRequest"))),r.a.createElement("h2",null,u("MyRequests")),r.a.createElement(st,{handleFilter:function(e,t,a,n){(function(e,t,a,n){return T.get("user/requests?startDate=".concat(e,"&endDate=").concat(t,"&stateId=").concat(a,"&typeId=").concat(n))})(e,t,a,n).then((function(e){var t=e.data;c(t)}))}}),p&&a?p&&a&&a.length>0?r.a.createElement(Qe,{data:a,users:p}):r.a.createElement("h3",null,u("NoRequests")):r.a.createElement(P.a,null),r.a.createElement(xe,{isOpen:s,onClose:function(){i(!1)}}),r.a.createElement(A.a,null))},ut=a(257),mt=a(488),dt=a(480),ft=a(486);var pt=r.a.memo((function(e){var t=e.types,a=e.isSendingRequest,c=e.handleFilter,l=Object(n.useState)(0),o=Object(f.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(""),m=Object(f.a)(u,2),d=m[0],p=m[1],b=Object(n.useState)(null),g=Object(f.a)(b,2),v=g[0],E=g[1],j=Object(n.useState)(null),y=Object(f.a)(j,2),D=y[0],S=y[1],C=Object(w.a)(["translation","reviews"]).t;return r.a.createElement("div",{className:"review-filter__content"},r.a.createElement(be,{fromDate:v,changeFromDate:function(e){E(e)},toDate:D,changeToDate:function(e){S(e)},showAllDays:!0,isSendingRequest:a,disablePeriod:!0}),r.a.createElement(oe.a,{value:d,label:C("reviews:FilterByName"),variant:"standard",onChange:function(e){return p(e.target.value)},className:"review-filter__name"}),r.a.createElement(te.a,{className:"review-filter__type"},r.a.createElement(ae.a,null,C("reviews:Type")),r.a.createElement(ne.a,{value:s,onChange:function(e){return function(e){i(e.target.value)}(e)}},t.map((function(e,t){return r.a.createElement(h.a,{key:"type-".concat(e.title,"-idx-").concat(t),value:e.id},C(e.title))})))),r.a.createElement(O.a,{variant:"contained",color:"secondary",onClick:function(){var e=0===s?"":s,t=null!==v?N()(v._d).format("YYYY-MM-DD").toString():"",a=null!==D?N()(D._d).format("YYYY-MM-DD").toString():"";c(t,a,d,e)},className:"review-filter__btn"},C("reviews:Filter")))}));function bt(e,t,a){return gt.apply(this,arguments)}function gt(){return(gt=Object(G.a)(K.a.mark((function e(t,a,n){var r,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=Object(G.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H().then((function(e){var r=e.data.filter((function(e){return e.isApproved===n}));t(r),a(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(){return c.apply(this,arguments)},e.next=4,r();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vt=[{id:"From",label:"From"},{id:"Role",label:"Role"},{id:"Type",label:"Type"},{id:"Dates",label:"Dates"},{id:"State",label:"State"},{id:"Comments",label:"RequestComments"},{id:"Details",label:"StateDetails"}];function Et(e){var t=e.headCells,a=e.actions,n=e.t;return r.a.createElement(Ae.a,null,r.a.createElement(Fe.a,null,t.map((function(e){return r.a.createElement(Me.a,{key:"table-cell-".concat(e.id),className:"reviews__table-cell",align:"center",padding:"default"},n(e.label))})),a?r.a.createElement(Me.a,{className:"reviews__table-cell",align:"center",padding:"default"},n("Actions")):null))}var ht=Object(Pe.a)((function(e){return{root:{width:"100%",marginTop:"10px"},table:{width:"100%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Ot=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(f.a)(l,2),s=o[0],i=o[1],u=ht(),m=Object(n.useState)(0),d=Object(f.a)(m,2),p=d[0],b=d[1],g=Object(n.useState)(5),v=Object(f.a)(g,2),E=v[0],h=v[1],O=Object(n.useState)(!0),j=Object(f.a)(O,2),N=j[0],y=j[1],D=Object(w.a)(["reviews","translation","roles","notifications"]),S=D.t,C=D.i18n,k=Object(n.useContext)(R),q=Object(f.a)(k,1)[0],_=a&&E-Math.min(E,a.length-p*E),I=function(e){c(e)},x=function(){y(!1)};return Object(n.useEffect)((function(){y(!0),bt(I,x,!0)}),[]),r.a.createElement("div",null,r.a.createElement(pt,{types:ue,isSendingRequest:s,handleFilter:function(e,t,a,n){i(!0),y(!0),z(e,t,a,n).then((function(e){var t=e.data.filter((function(e){return!0===e.isApproved}));c(t),y(!1)})).catch((function(e){"Network Error"===e.message?_e("Network Error"):e.response&&400===e.response.status?_e("400"):_e("")})),i(!1)}}),r.a.createElement("div",{className:u.root},N?r.a.createElement(P.a,null):a.length>0?r.a.createElement(Te.a,null,r.a.createElement(Le.a,{className:u.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Et,{headCells:vt,t:S}),r.a.createElement(Ye.a,null,a.map((function(e){return e.request.reviews.map((function(e){return e.reviewer=q.find((function(t){return t.id===e.reviewerId}))})),e.request.user=q.find((function(t){return t.id===e.request.userId})),e})).slice(p*E,p*E+E).map((function(e,t){var a="enhanced-table-".concat(t);return r.a.createElement(Fe.a,{className:"reviews__users-table-row",hover:!0,tabIndex:-1,key:e.id},r.a.createElement(Me.a,{component:"th",align:"center",id:a,scope:"row",padding:"none"},e.request.user.firstName.concat(" ",e.request.user.lastName)),r.a.createElement(Me.a,{align:"center"},S("roles:".concat(e.request.user.role))),r.a.createElement(Me.a,{align:"center"},S("translation:".concat(ue[e.request.typeId].title))),r.a.createElement(Me.a,{align:"center"},L(e.request.startDate,C.language)," -"," ",L(e.request.endDate,C.language)),r.a.createElement(Me.a,{align:"center"},S("translation:".concat(me[e.request.stateId]))),r.a.createElement(Me.a,{align:"center"},e.request.comment),r.a.createElement(Me.a,{align:"center"},function(e){var t=e.request.reviews.reduce((function(e,t){return t.isApproved?"".concat(e," ").concat(t.reviewer.firstName.concat(" ",t.reviewer.lastName),","):e}),"");return t?"".concat(S("AlreadyApproved"),": ").concat(t.slice(0,-1)):""}(e)))})),_>0&&r.a.createElement(Fe.a,{style:{height:33*_}},r.a.createElement(Me.a,{colSpan:6})))),r.a.createElement(Ue.a,{rowsPerPageOptions:function(){if(a){for(var e=[],t=Math.floor(a.length/5),n=1;n<t+1;n++)e.push(5*n);return a.length!==e[e.length-1]&&e.push(a.length),e}}(),component:"div",count:a.length,rowsPerPage:E,page:p,labelRowsPerPage:S("LabelRowsPerPage"),labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return S("LabelDisplayedRows",{from:t,to:a,count:n})},onChangePage:function(e,t){b(t)},onChangeRowsPerPage:function(e){h(e.target.value),b(0)}})):r.a.createElement("h3",null,S("NoData"))),r.a.createElement(A.a,null))};var wt=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(f.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(!0),m=Object(f.a)(u,2),d=m[0],p=m[1],b=Object(w.a)(["reviews","notifications"]).t,g=r.a.useContext(R),v=Object(f.a)(g,1)[0],E=function(e){c(e)},h=function(){p(!1)};return Object(n.useEffect)((function(){p(!0),bt(E,h,null)}),[]),r.a.createElement("div",null,r.a.createElement(pt,{types:ue,isSendingRequest:s,handleFilter:function(e,t,a,n){i(!0),p(!0),z(e,t,a,n).then((function(e){var t=e.data.filter((function(e){return null===e.isApproved}));c(t),p(!1)})).catch((function(e){"Network Error"===e.message?_e("Network Error"):e.response&&400===e.response.status?_e("400"):_e("")})),i(!1)}}),r.a.createElement("div",null,d?r.a.createElement(P.a,null):v&&a.length>0?r.a.createElement(Ve,{data:a,users:v}):r.a.createElement("h3",{className:"nodata"},b("NoData"))),r.a.createElement(A.a,null))},jt=[{id:"From",label:"From"},{id:"Role",label:"Role"},{id:"Type",label:"Type"},{id:"Dates",label:"Dates"},{id:"Comments",label:"RequestComments"},{id:"Reject",label:"MyRejectComment"}];function Nt(e){var t=e.headCells,a=e.actions,n=e.t;return r.a.createElement(Ae.a,null,r.a.createElement(Fe.a,null,t.map((function(e){return r.a.createElement(Me.a,{key:"table-cell-".concat(e.id),className:"reviews__table-cell",align:"center",padding:"default"},n(e.label))})),a?r.a.createElement(Me.a,{className:"reviews__table-cell",align:"center",padding:"default"},n("Actions")):null))}var yt=Object(Pe.a)((function(e){return{root:{width:"100%",marginTop:"10px"},table:{width:"100%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Dt=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(f.a)(l,2),s=o[0],i=o[1],u=yt(),m=Object(n.useState)(0),d=Object(f.a)(m,2),p=d[0],b=d[1],g=Object(n.useState)(5),v=Object(f.a)(g,2),E=v[0],h=v[1],O=Object(n.useState)(!0),j=Object(f.a)(O,2),N=j[0],y=j[1],D=Object(w.a)(["reviews","translation","roles","notifications"]),S=D.t,C=D.i18n,k=Object(n.useContext)(R),q=Object(f.a)(k,1)[0],_=a&&E-Math.min(E,a.length-p*E),I=function(e){c(e)},x=function(){y(!1)};return Object(n.useEffect)((function(){y(!0),bt(I,x,!1)}),[]),r.a.createElement("div",null,r.a.createElement(pt,{types:ue,isSendingRequest:s,handleFilter:function(e,t,a,n){i(!0),y(!0),z(e,t,a,n).then((function(e){var t=e.data.filter((function(e){return!1===e.isApproved}));c(t),y(!1)})).catch((function(e){"Network Error"===e.message?_e("Network Error"):e.response&&400===e.response.status?_e("400"):_e("")})),i(!1)}}),r.a.createElement("div",{className:u.root},N?r.a.createElement(P.a,null):a.length>0?r.a.createElement(Te.a,null,r.a.createElement(Le.a,{className:u.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Nt,{headCells:jt,t:S}),r.a.createElement(Ye.a,null,a.map((function(e){return e.request.user=q.find((function(t){return t.id===e.request.userId})),e})).slice(p*E,p*E+E).map((function(e,t){var a="enhanced-table-".concat(t);return r.a.createElement(Fe.a,{className:"reviews__users-table-row",hover:!0,tabIndex:-1,key:e.id},r.a.createElement(Me.a,{component:"th",align:"center",id:a,scope:"row",padding:"none"},e.request.user.firstName.concat(" ",e.request.user.lastName)),r.a.createElement(Me.a,{align:"center"},S("roles:".concat(e.request.user.role))),r.a.createElement(Me.a,{align:"center"},S("translation:".concat(ue[e.request.typeId].title))),r.a.createElement(Me.a,{align:"center"},L(e.request.startDate,C.language)," -"," ",L(e.request.endDate,C.language)),r.a.createElement(Me.a,{align:"center"},e.request.comment),r.a.createElement(Me.a,{align:"center"},e.comment))})),_>0&&r.a.createElement(Fe.a,{style:{height:33*_}},r.a.createElement(Me.a,{colSpan:6})))),r.a.createElement(Ue.a,{rowsPerPageOptions:function(){if(a){for(var e=[],t=Math.floor(a.length/5),n=1;n<t+1;n++)e.push(5*n);return a.length!==e[e.length-1]&&e.push(a.length),e}}(),component:"div",count:a.length,rowsPerPage:E,page:p,labelRowsPerPage:S("LabelRowsPerPage"),labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return S("LabelDisplayedRows",{from:t,to:a,count:n})},onChangePage:function(e,t){b(t)},onChangeRowsPerPage:function(e){h(e.target.value),b(0)}})):r.a.createElement("h3",null,S("NoData"))),r.a.createElement(A.a,null))};function St(e){var t=e.children,a=e.value,n=e.index,c=Object(ut.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},c),a===n&&r.a.createElement(ft.a,{p:3},t))}var Ct=function(){var e=r.a.useState(0),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(w.a)(["reviews","notifications"]),l=c.t,o=c.i18n;return r.a.createElement("div",null,r.a.createElement(b.a,{style:{width:"ru"===o.language?"528px":"480px"},position:"static",color:"default"},r.a.createElement(mt.a,{value:a,onChange:function(e,t){n(t)},indicatorColor:"primary",textColor:"primary"},r.a.createElement(dt.a,{label:l("NewRequests")}),r.a.createElement(dt.a,{label:l("ApprovedByMe")}),r.a.createElement(dt.a,{label:l("RejectedByMe")}))),r.a.createElement(St,{value:a,index:0},r.a.createElement(wt,null)),r.a.createElement(St,{value:a,index:1},r.a.createElement(Ot,null)),r.a.createElement(St,{value:a,index:2},r.a.createElement(Dt,null)))};var kt=function(){var e=new URLSearchParams(Object(p.h)().search),t=Object(n.useState)(!0),a=Object(f.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(""),d=Object(f.a)(m,2),b=d[0],g=d[1],v=Object(w.a)(["reviews","notifications"]).t;Object(n.useEffect)((function(){"approve"===e.get("action")?E(e.get("review"),!0):l(!1)}),[]);var E=function(e,t){if(l(!0),!t&&""===i)return Re("No comment"),void l(!1);(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t?{isApproved:t}:{isApproved:t,comment:a};return T.put("user/reviews/".concat(e),n)})(e,t,i).then((function(){g(t?"ApprovedRequest":"RejectedRequest"),Re(t?"Approve success":"Rejection success")})).catch((function(e){if("Network Error"===e.message)Re("Network Error"),g(t?"NotApprovedRequest":"NotRejectedRequest");else if(e.response&&400===e.response.status)Re("400"),g(t?"NotApprovedRequest":"NotRejectedRequest");else if(e.response&&409===e.response.status)switch(e.response.data){case"The request is not actual!":g("NotActualRequest"),Re(t?"Approve failed":"Rejection failed");break;case"The request has already been <approved/rejected>!":g("AlreadyDone"),Re(t?"Approve failed":"Rejection failed");break;case"No previous review!":g("NoPrevReview!"),Re(t?"Approve failed":"Rejection failed");break;default:g("SomethingWrong"),Re(t?"Approve failed":"Rejection failed")}else g(t?"NotApprovedRequest":"NotRejectedRequest"),Re(t?"Approve failed":"Rejection failed")})),l(!1)};return r.a.createElement("div",null,"approve"===e.get("action")?c?r.a.createElement(P.a,null):r.a.createElement("p",null,v(b)):0===b.length?r.a.createElement("div",{className:"reject__content"},r.a.createElement("h3",null,v("RejectReason")),r.a.createElement(fe,{disabled:c,comment:i,changeComment:function(e){u(e.target.value)}}),r.a.createElement(O.a,{disabled:c,className:"reviews-table__cancel-btn",variant:"contained",onClick:function(){E(e.get("review"),!1)}},v("Send"))):r.a.createElement("p",null,v(b)),r.a.createElement(A.a,null))};function qt(e){var t=e.isOpen,a=e.onClose,n=e.onOk,c=Object(w.a)("leaves").t;return r.a.createElement("div",null,r.a.createElement(Q.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title"},r.a.createElement(ee.a,{id:"alert-dialog-title"},c("EditApprovedRequest")),r.a.createElement(Z.a,null,r.a.createElement("span",{className:"alert-dialog-description"},c("EditRequestConfirmation"))),r.a.createElement(X.a,null,r.a.createElement(O.a,{onClick:n,color:"primary"},c("OK")),r.a.createElement(O.a,{onClick:a,color:"primary",autoFocus:!0},c("Cancel")))))}var _t=[];var Rt=function(){var e=Object(p.i)().id,t=Object(p.g)(),a=Object(n.useContext)(R),c=Object(f.a)(a,2),l=c[0],o=(c[1],Object(n.useState)(null)),s=Object(f.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(!1),d=Object(f.a)(m,2),b=d[0],g=d[1],v=Object(n.useState)(""),E=Object(f.a)(v,2),h=E[0],j=E[1],y=Object(n.useState)(null),D=Object(f.a)(y,2),S=D[0],C=D[1],k=Object(n.useState)(null),q=Object(f.a)(k,2),_=q[0],I=q[1],x=Object(n.useState)([""]),F=Object(f.a)(x,2),M=F[0],L=F[1],Y=Object(n.useState)(2),U=Object(f.a)(Y,2),B=U[0],W=U[1],H=Object(n.useState)(!0),z=Object(f.a)(H,2),V=z[0],J=z[1],K=Object(n.useState)(!1),G=Object(f.a)(K,2),Q=G[0],X=G[1],Z=Object(n.useState)(!1),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),ce=Object(f.a)(ne,2),le=ce[0],oe=ce[1],se=Object(n.useState)(""),ie=Object(f.a)(se,2),de=ie[0],fe=ie[1],pe=Object(w.a)(["requests","translation","notifications"]).t,be={prManagers:_t,isSendingRequest:b,comment:h,changeComment:function(e){j(e.target.value)},fromDate:S,changeFromDate:function(e){C(e)},toDate:_,changeToDate:function(e){I(e)},managers:M,changeManagers:function(e){L(e)},duration:B,changeDuration:function(e){W(e)},isEditable:V,request:i},he=[{id:1,title:"Administrative force majeure leave",comp:r.a.createElement(ve,be)},{id:2,title:"Administrative leave",comp:r.a.createElement(ge,be)},{id:3,title:"Social leave",comp:r.a.createElement(je,be)},{id:4,title:"Sick leave (no documents)",comp:r.a.createElement(Oe,be)},{id:5,title:"Sick leave (with documents)",comp:r.a.createElement(we,be)},{id:6,title:"Study leave",comp:r.a.createElement(Ne,be)},{id:7,title:"Paid leave",comp:r.a.createElement(Ee,be)}],ye=function(e){e.reviews.map((function(e){return e.reviewer=l.find((function(t){return t.id===e.reviewerId}))})),e.user=l.find((function(t){return t.id===e.userId}));var t=e.reviews.filter((function(e){return 1!==e.reviewerId})).map((function(e){return e.reviewer.firstName.concat(" ",e.reviewer.lastName)}));L(t),C(N()(e.startDate)),I(N()(e.endDate)),W(e.durationId),j(e.comment),u(e)};Object(n.useEffect)((function(){l&&function(e){return T.get("user/requests/"+e)}(e).then((function(e){var t=e.data;ye(t)})).catch((function(e){"Network Error"===e.message?ke("Network Error"):e.response&&400===e.response.status?ke("400"):ke(""),fe("NotFound")})),l&&(_t=l.filter((function(e){return"Manager"===e.role})).map((function(e){return e.firstName.concat(" ",e.lastName)})))}),[e,l]);var De=function(t){if(g(!0),!S||!_)return qe("Empty dates"),void g(!1);if([2,4,5,7].includes(i.typeId)&&0===h.replaceAll(" ","").length)return qe("Empty comment"),void g(!1);if([2,6,7].includes(i.typeId)&&M.includes(""))return qe("Empty managers"),void g(!1);var a=M.length>0?M.map((function(e){return l.filter((function(e){return"Manager"===e.role})).find((function(t){return t.firstName.concat(" ",t.lastName)===e})).id})):null;(function(e,t){return T.put("requests/".concat(e),t)})(e,{id:e,typeId:i.typeId,startDate:N()(S._d).format("YYYY-MM-DD").toString(),endDate:N()(_._d).format("YYYY-MM-DD").toString(),reviewsIds:null!==a?[1].concat(Object($.a)(a)):[1],comment:h,durationId:B,isDateIntersectionAllowed:t}).then((function(){ke("Edited")})).catch((function(e){"Network Error"===e.message?(ke("Network Error"),ye(i)):e.response&&400===e.response.status?(ke("400"),ye(i)):e.response&&409===e.response.status?ae(!0):(ke("NotEdited"),ye(i))})),ae(!1),g(!1),J(!0)},Se=function(){g(!0),function(e){return T.delete("user/requests/".concat(e))}(e).then((function(){J(!0),t.push("/my_requests")})).catch((function(e){"Network Error"===e.message?ke("Network Error"):e.response&&400===e.response.status?ke("400"):ke("")})),g(!1)};return r.a.createElement("div",{className:"personal__content",style:{padding:5}},0===de.length?i?r.a.createElement("div",null,r.a.createElement("h2",{className:"personal__type"},pe("translation:".concat(ue[i.typeId].title)),r.a.createElement("p",{className:"personal__state"},"(",pe("State"),": ",pe("translation:".concat(me[i.stateId])),")")),r.a.createElement("div",{className:"personal__request"},he[i.typeId-1].comp),r.a.createElement("div",{className:"personal__btn-group"},[me.indexOf("New"),me.indexOf("InProgress")].includes(i.stateId)||i.stateId===me.indexOf("Approved")&&new Date(i.endDate)>new Date?V?r.a.createElement(O.a,{className:"personal-request__edit-btn",variant:"contained",disabled:b,onClick:function(){i.stateId===me.indexOf("Approved")?X(!0):J(!1)}},pe("Edit")):r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{className:"personal-request__save-btn",variant:"contained",disabled:b,onClick:function(){De(!1)}},pe("SaveChanges")),r.a.createElement(O.a,{className:"personal-request__ce-btn",variant:"contained",disabled:b,onClick:function(){!function(){var e=i.reviews.filter((function(e){return 1!==e.reviewerId})).map((function(e){return e.reviewer.firstName.concat(" ",e.reviewer.lastName)}));L(e),C(N()(i.startDate)),I(N()(i.endDate)),W(i.durationId),j(i.comment)}(),J(!0)}},pe("CancelEditing"))):null,V&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{className:"personal-request__duplicate-btn",variant:"contained",disabled:b,onClick:function(){oe(!0)},autoFocus:!0},pe("Duplicate")),[me.indexOf("New"),me.indexOf("InProgress")].includes(i.stateId)||i.stateId===me.indexOf("Approved")&&new Date(i.endDate)>new Date?r.a.createElement(O.a,{className:"personal-request__decline-btn",variant:"contained",disabled:b,onClick:function(){Se()},autoFocus:!0},pe("Decline")):null,r.a.createElement(O.a,{className:"personal-request__close-btn",variant:"contained",disabled:b,onClick:function(){t.goBack()},autoFocus:!0},pe("Close")))),r.a.createElement(xe,{isOpen:le,onClose:function(){oe(!1)},request:i}),r.a.createElement(re,{isOpen:te,onClose:function(){ae(!1)},onOk:function(){return De(!0)},onCancel:function(){ye(i),ae(!1)}})):r.a.createElement(P.a,null):r.a.createElement("h2",null,pe(de)),r.a.createElement(qt,{isOpen:Q,onClose:function(){X(!1)},onOk:function(){J(!1);var e=i;e.reviews=i.reviews.map((function(e){return e.isApproved=null,e})),u(e),X(!1)}}),r.a.createElement(A.a,null))},It=[{name:"Home",path:"/home",exact:!0,access:["Accountant","Manager","Employee"],main:function(){return r.a.createElement(ot,null)}},{name:"MyRequests",path:"/my_requests",exact:!0,access:["Manager","Employee"],main:function(){return r.a.createElement(it,null)}},{name:"OtherRequests",path:"/other_requests",exact:!0,access:["Accountant","Manager"],main:function(){return r.a.createElement(Ct,null)}}];var xt=function(){var e=Object(n.useState)(0),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(_),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useContext)(R),d=Object(f.a)(m,2),b=(d[0],d[1]),g=Object(w.a)("user").t,v=Object(p.g)(),E=Object(p.h)();return Object(n.useEffect)((function(){"Admin"!==i.role?c(It.findIndex((function(e){return v.location.pathname.includes(e.path)}))):v.replace("/admin")}),[i,E]),Object(n.useEffect)((function(){Y("","").then((function(e){var t=e.data;b(t)})).catch((function(e){e.response&&401===e.response.status&&(localStorage.clear(),u({userId:null,user:null,role:null,token:null}))}))}),[i.userId]),r.a.createElement("div",{className:"router__btn-group"},r.a.createElement("div",{className:"sidebar"},r.a.createElement(x.a,{orientation:"vertical",style:{width:"100%"}},It.map((function(e,t){if(e.access.includes(i.role))return r.a.createElement(o.b,{key:"path-".concat(e.name,"-").concat(t),to:e.path},r.a.createElement(O.a,{disableElevation:!0,className:"button",variant:t===a?"contained":"text",color:t===a?"primary":"default",fullWidth:!0,onClick:function(){c(t)}},g(e.name)))})))),r.a.createElement("div",{className:"router__switch"},r.a.createElement(p.d,null,It.map((function(e,t){if(e.access.includes(i.role))return r.a.createElement(p.b,{key:t,path:e.path,exact:e.exact,render:function(t){var a=t.location;return i.token?r.a.createElement(e.main,null):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:a}}})}})})),r.a.createElement(p.b,{path:"/my_requests/:id",exect:!0,render:function(e){var t=e.location;return i.token?r.a.createElement(Rt,{isOpen:!0}):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:t}}})}}),r.a.createElement(p.b,{path:"/other_requests/actions",render:function(e){var t=e.location;return i.token?r.a.createElement(kt,null):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:t}}})}}),r.a.createElement(p.b,{path:"*",exect:!0,children:r.a.createElement(p.a,{to:"/login"})}))))},Pt=a(132),At=a(482),Ft=a(464),Mt=a(483),Tt=a(484);var Lt=r.a.memo((function(){var e=Object(p.g)(),t=Object(p.h)(),a=Object(w.a)(["login","notifications"]).t,c=Object(n.useContext)(_),l=Object(f.a)(c,2),o=l[0],s=l[1],i=Object(n.useContext)(R),u=Object(f.a)(i,2),m=u[0],d=(u[1],Object(n.useState)("")),b=Object(f.a)(d,2),g=b[0],v=b[1],E=Object(n.useState)(""),h=Object(f.a)(E,2),j=h[0],N=h[1],y=Object(n.useState)(!1),D=Object(f.a)(y,2),S=D[0],C=D[1],k=Object(n.useState)({username:"",password:""}),q=Object(f.a)(k,2),I=q[0],x=q[1];return Object(n.useEffect)((function(){"Admin"===o.role?e.push("/admin"):["Accountant","Manager","Employee"].includes(o.role)&&e.push("/home")}),[]),r.a.createElement("div",null,r.a.createElement("form",{className:"login__form"},r.a.createElement("h1",{className:"login__title"},a("Title")),r.a.createElement(oe.a,{label:a("Username"),error:I.username.length>0,helperText:I.username,variant:"standard",fullWidth:!0,className:"form-input",value:g,onChange:function(e){return v(e.target.value)}}),r.a.createElement(oe.a,{label:a("Password"),error:I.password.length>0,helperText:I.password,variant:"standard",fullWidth:!0,className:"form-input",type:S?"text":"password",value:j,onChange:function(e){return N(e.target.value)},InputProps:{endAdornment:r.a.createElement(At.a,{position:"end"},r.a.createElement(Ft.a,{"aria-label":"toggle password visibility",onClick:function(){C(!S)}},S?r.a.createElement(Mt.a,null):r.a.createElement(Tt.a,null)))}}),r.a.createElement(O.a,{variant:"contained",color:"primary",fullWidth:!0,size:"large",className:"login__btn",onClick:function(){var n=Object(Pt.a)({},I);if(n.username=""!==g?"":"".concat(a("NoEmpty")," ").concat(a("Username")),n.password=""!==j?"":"".concat(a("NoEmpty")," ").concat(a("Password")),x(n),!(Object.values(n).reduce((function(e,t){return e+t.length}),0)>0)){M.a.post("https://timeofftrackerwebapi2020.azurewebsites.net//auth/token",{username:g,password:j}).then((function(a){var n=a.data,r=m?m.find((function(e){return e.id===n.userId})):null;localStorage.setItem("userId",n.userId),localStorage.setItem("role",n.role),localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(r)),s({userId:n.userId,user:r,role:n.role,token:n.token}),e.replace(t.state?t.state.from.pathname+t.state.from.search:"Admin"===n.role?"/admin":"/home")})).catch((function(e){"Network Error"===e.message?De("Network Error"):e.response&&"Username or password is incorrect"===e.response.data.message?x({username:a("IncorrectLoginData"),password:a("IncorrectLoginData")}):e.response&&400===e.response.status?De("400"):De("")}))}}},a("LogIn"))),r.a.createElement(A.a,null))})),Yt=a(12),Ut=a(499),Bt=a(485),Wt=a(254),Ht=a.n(Wt),zt=a(253),Vt=a.n(zt);function Jt(e){var t=e.isOpen,a=e.onClose,n=e.onDelete,c=e.user,l=Object(w.a)("admin").t;return r.a.createElement("div",null,r.a.createElement(Q.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title"},r.a.createElement(ee.a,{id:"alert-dialog-title"},l("DeleteUser")),r.a.createElement(Z.a,null,r.a.createElement("span",{className:"alert-dialog-description"},l("DeleteUserConfirmation")," ",r.a.createElement("b",null,c&&c[1]),"?")),r.a.createElement(X.a,null,r.a.createElement(O.a,{onClick:function(){return n(c[0])},color:"primary"},l("OK")),r.a.createElement(O.a,{onClick:a,color:"primary",autoFocus:!0},l("Cancel")))))}function Kt(e){var t=e.isOpen,a=e.onClose,c=e.roles,l=e.updateUsers,o=Object(n.useState)(""),s=Object(f.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(""),d=Object(f.a)(m,2),p=d[0],b=d[1],g=Object(n.useState)(0),v=Object(f.a)(g,2),E=v[0],j=v[1],N=Object(n.useState)(""),y=Object(f.a)(N,2),D=y[0],S=y[1],C=Object(n.useState)(""),k=Object(f.a)(C,2),q=k[0],_=k[1],R=Object(n.useState)({firstName:"",lastName:"",email:"",password:""}),I=Object(f.a)(R,2),x=I[0],P=I[1],F=Object(w.a)(["admin","roles","notifications"]).t,M=function(){var e=Object(G.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Object(Pt.a)({},x)).firstName=""!==i?"":"".concat(F("NoEmpty")," ").concat(F("FirstName")),t.lastName=""!==p?"":"".concat(F("NoEmpty")," ").concat(F("LastName")),t.email=""!==D?"":"".concat(F("NoEmpty")," ").concat(F("Email")),t.password=""!==q?"":"".concat(F("NoEmpty")," ").concat(F("Password")),P(t),!(Object.values(t).reduce((function(e,t){return e+t.length}),0)>0)){e.next=8;break}return e.abrupt("return");case 8:return n={firstName:i,lastName:p,email:D,password:q,role:c[E]},e.next=11,(r=n,T.post("accounts",r)).then((function(){Se("Successful New User Adding"),a()})).catch((function(e){"Network Error"===e.message?Se("Network Error"):e.response&&400===e.response.status?Se("400"):Se("New user failure")}));case 11:l();case 12:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(Q.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},F("RegisterNewUser")),r.a.createElement(Z.a,null,r.a.createElement("form",{className:"new-user__form"},r.a.createElement(oe.a,{label:F("FirstName"),error:x.firstName.length>0,helperText:x.firstName,variant:"standard",fullWidth:!0,className:"new-user__form-input",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement(oe.a,{label:F("LastName"),error:x.lastName.length>0,helperText:x.lastName,variant:"standard",fullWidth:!0,className:"new-user__form-input",value:p,onChange:function(e){return b(e.target.value)}}),r.a.createElement(oe.a,{label:F("Email"),error:x.email.length>0,helperText:x.email,variant:"standard",fullWidth:!0,className:"new-user__form-input",value:D,onChange:function(e){return S(e.target.value)}}),r.a.createElement(oe.a,{label:F("Password"),error:x.password.length>0,helperText:x.password,variant:"standard",fullWidth:!0,className:"new-user__form-input",type:"text",value:q,onChange:function(e){return _(e.target.value)}}),r.a.createElement(te.a,{className:"new-user__form-input"},r.a.createElement(ae.a,null,F("roles:Role")),r.a.createElement(ne.a,{value:E,onChange:function(e){j(e.target.value)}},c.map((function(e,t){return r.a.createElement(h.a,{key:"key-".concat(t,"-name").concat(e),value:t},F("roles:"+e))})))))),r.a.createElement(X.a,null,r.a.createElement(O.a,{onClick:M,color:"primary"},F("Add")),r.a.createElement(O.a,{onClick:a,color:"primary",autoFocus:!0},F("Cancel")))),r.a.createElement(A.a,null))}function Gt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var $t=[{id:"firstName",numeric:!0,disablePadding:!0,label:"Name"},{id:"userName",numeric:!1,disablePadding:!1,label:"Username"},{id:"email",numeric:!1,disablePadding:!1,label:"Email"},{id:"role",numeric:!1,disablePadding:!1,label:"Role"},{id:"button",numeric:!1,disablePadding:!1,label:""}];function Qt(e){var t=e.classes,a=e.order,n=e.orderBy,c=e.onRequestSort,l=e.t;return r.a.createElement(Ae.a,null,r.a.createElement(Fe.a,null,r.a.createElement(Me.a,{padding:"checkbox"}),$t.map((function(e){return r.a.createElement(Me.a,{key:e.id,align:e.numeric?"left":"center",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a,className:"reviews__table-cell"},r.a.createElement(Ut.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(o=e.id,function(e){c(e,o)})},l([e.label,"roles:"+e.label]),n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var o}))))}var Xt=Object(Pe.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Yt.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Zt=function(e){var t=e.roles,a=e.updateUsers,c=e.t,l=Xt(),o=Object(n.useState)(!1),s=Object(f.a)(o,2),i=s[0],u=s[1];return r.a.createElement(g.a,{className:l.root},r.a.createElement("h2",{className:"users-table__title"},c("UsersList")),r.a.createElement(r.a.Fragment,null,r.a.createElement(Bt.a,{title:c("AddNewUser")},r.a.createElement(Ft.a,{className:"new_user-btn","aria-label":"add new user",onClick:function(){u(!0)}},r.a.createElement(Vt.a,null))),r.a.createElement(Kt,{isOpen:i,onClose:function(){return u(!1)},roles:t,updateUsers:a})))},ea=Object(Pe.a)((function(e){return{root:{width:"100%"},table:{width:"100%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ta(e){var t=e.data,a=e.roles,c=e.updateUsers,l=ea(),o=Object(n.useState)("asc"),s=Object(f.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(null),d=Object(f.a)(m,2),p=d[0],b=d[1],g=Object(n.useState)(0),v=Object(f.a)(g,2),E=v[0],j=v[1],N=Object(n.useState)(5),y=Object(f.a)(N,2),D=y[0],S=y[1],C=Object(n.useState)(null),k=Object(f.a)(C,2),q=k[0],_=k[1],R=Object(n.useState)(null),I=Object(f.a)(R,2),x=I[0],P=I[1],F=Object(n.useState)(!1),M=Object(f.a)(F,2),L=M[0],Y=M[1],B=Object(n.useState)(null),W=Object(f.a)(B,2),H=W[0],z=W[1],V=Object(w.a)(["admin","roles","notifications"]).t,J=D-Math.min(D,t.length-E*D),$=function(){var e=Object(G.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t).then((function(){Se("User delete success"),Y(!1)})).catch((function(e){"Network Error"===e.message?Se("Network Error"):e.response&&400===e.response.status?Se("400"):Se("User delete failed")}));case 2:c();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(G.a)(K.a.mark((function e(t,n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x!==a.indexOf(n.role)){e.next=3;break}return _(null),e.abrupt("return");case 3:return e.next=5,(t={id:n.id,firstName:n.firstName,lastName:n.lastName,userName:n.userName,email:n.email,role:a[x]},T.put("users/",t)).then((function(){Se("Role changed success"),_(!1)})).catch((function(e){"Network Error"===e.message?Se("Network Error"):e.response&&400===e.response.status?Se("400"):Se("Role changed failed")}));case 5:c();case 6:case"end":return e.stop()}var t}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:l.root},r.a.createElement(Zt,{roles:a,updateUsers:c,t:V}),r.a.createElement(Te.a,null,r.a.createElement(Le.a,{className:l.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Qt,{classes:l,order:i,orderBy:p,onRequestSort:function(e,t){u(p===t&&"asc"===i?"desc":"asc"),b(t)},rowCount:t.length,t:V}),r.a.createElement(Ye.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return Gt(e,a,t)}:function(e,a){return-Gt(e,a,t)}}(i,p)).slice(E*D,E*D+D).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return r.a.createElement(Fe.a,{className:"admin__users-table-row",hover:!0,role:"checkbox",tabIndex:-1,key:e.id},r.a.createElement(Me.a,{padding:"checkbox"},r.a.createElement(Bt.a,{title:V("Delete")},r.a.createElement(Ft.a,{className:"delete-icon","aria-label":"delete",onClick:function(){z([e.id,e.firstName.concat(" ",e.lastName)]),Y(!0)}},r.a.createElement(Ht.a,null)))),r.a.createElement(Me.a,{component:"th",id:n,scope:"row",padding:"none"},e.firstName?e.firstName.concat(" ",e.lastName):""),r.a.createElement(Me.a,{align:"center"},e.userName),r.a.createElement(Me.a,{align:"center"},e.email),r.a.createElement(Me.a,{align:"center"},q===e.id?r.a.createElement(te.a,null,r.a.createElement(ae.a,null,V("roles:Role")),r.a.createElement(ne.a,{value:x,onChange:function(e){P(e.target.value)}},a.map((function(e,t){return r.a.createElement(h.a,{key:"key-".concat(t,"-name").concat(e),value:t},V("roles:"+e))})))):V("roles:"+e.role)),r.a.createElement(Me.a,{align:"center"},q===e.id?r.a.createElement("div",{className:"row"},r.a.createElement(O.a,{className:"users-table__ok-btn",variant:"contained",onClick:function(){Q(e.id,e)}},V("Ok")),r.a.createElement(O.a,{className:"users-table__cancel-btn",variant:"contained",onClick:function(){_(null)}},V("Cancel"))):r.a.createElement(O.a,{variant:"contained",onClick:function(){_(e.id),P("Employee"===e.role?0:1)}},V("Edit"))))})),J>0&&r.a.createElement(Fe.a,{style:{height:33*J}},r.a.createElement(Me.a,{colSpan:6})))),r.a.createElement(Ue.a,{rowsPerPageOptions:function(){if(t){for(var e=[],a=Math.floor(t.length/5),n=1;n<a+1;n++)e.push(5*n);return t.length!==e[e.length-1]&&e.push(t.length),e}}(),component:"div",count:t.length,rowsPerPage:D,page:E,labelRowsPerPage:V("LabelRowsPerPage"),labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return V("LabelDisplayedRows",{from:t,to:a,count:n})},onChangePage:function(e,t){j(t)},onChangeRowsPerPage:function(e){S(e.target.value),j(0)}})),r.a.createElement(Jt,{isOpen:L,onClose:function(){return Y(!1)},onDelete:$,user:H}),r.a.createElement(A.a,null))}var aa=r.a.memo((function(){var e=Object(n.useState)(!0),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(f.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(""),m=Object(f.a)(u,2),d=m[0],b=m[1],g=Object(n.useState)(-1),v=Object(f.a)(g,2),E=v[0],j=v[1],N=Object(n.useContext)(_),y=Object(f.a)(N,2),D=y[0],S=(y[1],Object(w.a)(["admin","roles","notifications"]).t),C=Object(p.g)();Object(n.useEffect)((function(){"Admin"===D.role?k():C.replace("/home")}),[]);var k=function(){var e=Object(G.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t=-1===E?"":q[E],e.next=4,Y(d,t).then((function(e){var t=e.data.filter((function(e){return"Admin"!==e.role&&"Accountant"!==e.role}));i(t)})).catch((function(e){"Network Error"===e.message?Se("Network Error"):e.response&&400===e.response.status?Se("400"):Se()}));case 4:c(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=["Employee","Manager"];return r.a.createElement("div",null,r.a.createElement("div",{className:"admin__form"},r.a.createElement(oe.a,{label:S("FilterByName"),variant:"standard",className:"admin__form-input",onChange:function(e){return b(e.target.value)}}),r.a.createElement(te.a,{className:"admin__filter-role"},r.a.createElement(ae.a,null,S("FilterByRole")),r.a.createElement(ne.a,{value:E,onChange:function(e){j(e.target.value)}},r.a.createElement(h.a,{value:-1},S("Any")),q.map((function(e,t){return r.a.createElement(h.a,{key:"key-".concat(t,"-name").concat(e),value:t},S("roles:"+e))})))),r.a.createElement(O.a,{variant:"contained",color:"secondary",className:"filter__btn",onClick:function(){return k()}},S("Filter"))),r.a.createElement("div",{className:"users__content"},a?r.a.createElement(P.a,null):r.a.createElement(ta,{data:s,roles:q,updateUsers:k})),r.a.createElement(A.a,null))})),na=localStorage.getItem("role"),ra=localStorage.getItem("token"),ca=localStorage.getItem("userId"),la=localStorage.getItem("user");var oa=function(){var e=Object(n.useState)({userId:ca,user:la,role:na,token:ra}),t=Object(f.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(f.a)(l,2),s=o[0],i=o[1];return r.a.createElement(R.Provider,{value:[s,i]},r.a.createElement(_.Provider,{value:[a,c]},r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login",exact:!0},r.a.createElement(Lt,null)),r.a.createElement(p.b,{path:"/admin",exact:!0},r.a.createElement(aa,null)),r.a.createElement(p.b,{path:"/"},r.a.createElement(xt,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(417);l.a.render(r.a.createElement(o.a,null,r.a.createElement(n.Suspense,{fallback:"Loading translation"},r.a.createElement(oa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[278,1,2]]]);
//# sourceMappingURL=main.53598d46.chunk.js.map